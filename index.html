<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Release Dashboard</title>
  <style>
    body {
      font-family: sans-serif;
      background: white;
      padding: 40px;
    }
    label, button {
      display: block;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>Create release</h1>

<label>
  Release date:
  <input type="date" id="releaseDate" />
</label>

<button onclick="createRelease()">Create release</button>

<script>
function formatDate(dateStr) {
  const d = new Date(dateStr);
  const dd = String(d.getDate()).padStart(2, '0');
  const mm = String(d.getMonth() + 1).padStart(2, '0');
  const yyyy = d.getFullYear();
  return `${dd}-${mm}-${yyyy}`;
}

async function createRelease() {
  const dateInput = document.getElementById('releaseDate').value;
  if (!dateInput) {
    alert('Please select a date');
    return;
  }

  const releaseName = formatDate(dateInput);

  await fetch(
    "https://api.github.com/repos/<OWNER>/release-dashboard/actions/workflows/create-release.yml/dispatches",
    {
      method: "POST",
      headers: {
        "Accept": "application/vnd.github+json",
        "Authorization": "token <TEMP_PAT>"
      },
      body: JSON.stringify({
        ref: "main",
        inputs: {
          release: releaseName
        }
      })
    }
  );

  alert(`Release release/${releaseName} triggered`);
}
</script>

</body>
</html>
